!function(e){e.module("phonegular.config",[]).value("phonegular.config",{debug:!0}),e.module("phonegular.directives",[]),e.module("phonegular.filters",[]),e.module("phonegular.services",[]),e.module("phonegular",["phonegular.config","phonegular.directives","phonegular.filters","phonegular.services"]).run(["PhonegularClass",function(){function e(){}e.prototype.extendClass=function(e,n){var t=e;return t.prototype=Object.create(n.prototype),t.prototype.constructor=e,t.addMethods=function(e){for(var n in e)t.prototype[n]=e[n]},t},window.phonegular=new e}])}(angular),function(){"use strict";for(var e=0,n=["ms","moz","webkit","o"],t=0;t<n.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),o=Math.max(0,16-(t-e)),r=window.setTimeout(function(){n(t+o)},o);return e=t+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){"use strict";Array.of||(Array.of=function(){return Array.prototype.slice.call(arguments)}),Array.prototype.find||(Array.prototype.find=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n,t=Object(this),o=t.length>>>0,r=arguments[1],i=0;o>i;i++)if(n=t[i],e.call(r,n,i,t))return n;return void 0}),Array.prototype.findIndex||(Array.prototype.findIndex=function(e){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n,t=Object(this),o=t.length>>>0,r=arguments[1],i=0;o>i;i++)if(n=t[i],e.call(r,n,i,t))return i;return-1})}(),function(){"use strict";"function"!=typeof Object.create&&(Object.create=function(){var e=function(){};return function(n){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof n)throw TypeError("Argument must be an object");e.prototype=n;var t=new e;return e.prototype=null,t}}())}(),angular.module("phonegular.services").factory("EventDispatcher",["PhonegularClass",function(e){function n(){e.call(this),this._listeners={}}return phonegular.extendClass(n,e),n.prototype.on=function(e,n){var t=this._listeners[e];return t?t.indexOf(n)<=0&&t.push(n):this._listeners[e]=[n],this},n.prototype.off=function(e,n){var t=this._listeners[e];if(!t)return this;if(null!=n){var o=t.indexOf(n);o>=0&&(t.length<=1?this._listeners[e]=null:t.splice(o,1))}else this._listeners[e]=null;return this},n.prototype.trigger=function(e){var n=Array.prototype.slice.call(arguments),t=e instanceof Event?e:new CustomEvent(e,{detail:n}),o=this._listeners[t.type];if(n[0]=t,o)for(var r=0,i=o.length;i>r;r++)o[r].apply(this,n);return this},n.prototype.hasEventListener=function(e){var n=this._listeners[e];return null!=n&&n.length>0},n.prototype.addEventListener=n.prototype.on,n.prototype.removeEventListener=n.prototype.off,n.prototype.dispatchEvent=n.prototype.trigger,n}]),angular.module("phonegular.services").factory("PhonegularClass",[function(){function e(){}return e.prototype.is=function(e){return this instanceof e},e}]),angular.module("phonegular.services").run(["popupManager",function(e){"cordova"in window&&(window.alert=function(n){e.alert(n)})}]).service("popupManager",["$q","$timeout",function(e,n){var t=this;this.alert=function(t,o,r){var i=e.defer();return null!=navigator&&null!=navigator.notification?navigator.notification.alert(t,function(){n(i.resolve)},o||"Alert",r):(window.alert(t),i.resolve()),i.promise},this.error=function(e,n){return t.alert(e,n||"Error")},this.confirm=function(n,t,o,r){function i(e){1===e&&u.resolve(),u.reject()}var u=e.defer();return null!=navigator&&null!=navigator.notification?navigator.notification.confirm(n,i,t||"Confirm",[o||"OK",r||"Cancel"]):i(window.confirm(n)?1:2),u.promise}}]),angular.module("phonegular.services").service("soundManager",["$q","$log","$timeout",function(e,n,t){var o=null,r=this;this._preloadedSounds={},this._getPlugin=function(){return o||(o=window.plugins&&window.plugins.NativeAudio?window.plugins.NativeAudio:null),o},this.isSupported=function(){return r._getPlugin(),null!=o},this.preloadFX=function(n){var i=e.defer();return r._getPlugin(),"object"==typeof n&&(n=n.src),o?r._preloadedSounds[n]?t(function(){i.resolve(n)}):o.preloadSimple(n,n,function(){t(function(){r._preloadedSounds[n]=!0,i.resolve(n)})},function(){t(function(){i.reject(n)})}):i.reject(),i.promise},this.preloadAudio=function(i,u){var a=e.defer(),l="object"==typeof i?i.src:i;return r._getPlugin(),!r._preloadedSounds[l]&&o?o.preloadComplex(l,l,u,1,0,function(){t(function(){r._preloadedSounds[l]=!0,a.resolve(l)})},function(e){t(function(){n.error("soundService >> preloadAudio: "+e),a.reject(l)})}):t(function(){a.resolve(l)}),a.promise},this.play=function(i){var u=e.defer(),a="object"==typeof i?i.src:i;return r._getPlugin(),o?r._preloadedSounds[a]?o.play(a,angular.noop,function(){t(function(){n.error('soundService >> Failed to play "'+a+'".'),u.reject(a)})},function(){t(function(){u.resolve(a)})}):r.preloadFX(a).then(function(){r.play(a).then(function(){r.unload(a).then(u.resolve)},u.reject)},function(){u.reject(a)}):t(function(){u.resolve(a)}),u.promise},this.stop=function(i){var u=e.defer(),a="object"==typeof i?i.src:i;return r._getPlugin(),o&&o.stop(a,function(){t(function(){u.resolve(a)})},function(){t(function(){n.error('soundService >> Failed to stop "'+a+'".'),u.reject(a)})}),u.promise},this.loop=function(n){var t=e.defer(),i="object"==typeof n?n.src:n;return r._getPlugin(),o?(o.loop(i),t.resolve()):t.resolve(),t.promise},this.unload=function(n){var i=e.defer(),u="object"==typeof n?n.src:n;return r._getPlugin(),r._preloadedSounds[u]?o.unload(u,function(){t(function(){r._preloadedSounds[u]=!1,i.resolve(u)})},function(){t(function(){r._preloadedSounds[u]=!1,i.reject(u)})}):t(function(){i.resolve(u)}),i.promise}}]);